webpackJsonp([1,0],[function(e,t,n){function r(){cardFeeRate=parseFloat(Q.QueryString.GetValue("cardFeeRate")),G=Q.QueryString.GetValue("merId"),q=Q.QueryString.GetValue("openid"),I=Q.QueryString.GetValue("merName"),R=Q.QueryString.GetValue("prdt_no"),I&&(document.title=decodeURI(I))}function a(){setInterval(function(){var e=parseInt(($("body")[0].scrollHeight-360)/2);$("#orderTiShi .modal-dialog").css("margin-top",e+"px")},500)}function o(){if($("input").blur(),!$("#submitA").hasClass("btn_disabled")){var e=Q.QueryString.GetValue("lfq_amt"),t=Q.QueryString.GetValue("lfq_cnt"),n=(parseFloat(e)*(1+cardFeeRate/100)+1e-4).toFixed(2),r=j.hold2bit(parseFloat(n)/stageNumber),a=j.hold2bit(e/stageNumber),o=parseFloat(r)-parseFloat(a);$("#ts_cnt").text(t+"期"),$("#ts_amt").text(e+"元"),$("#ts_mqhk").text(r+"元"),$("#ts_mqsxf").text(o.toFixed(2)),B.showModals("orderTiShi")}}function u(){$("#orderTiShi").hide(),$(".modal-content").hide(),$(".modal-content2").show(),B.showModals();var e=i();console.log(e);try{Q.postAjax(LFQ_ORDER_CREATE_URL,e,l)}catch(t){$("#msg_lable").text("网络无法连接"),$(".modal-content").show(),$(".modal-content2").hide(),B.showModals()}}function l(e){var t="init",n="",r="";if(void 0!=e.lft_orderinfo_response){if("0000"==e.lft_orderinfo_response.resp_code)return void(window.location.href="qrcodePay.html?payCode="+e.lft_orderinfo_response.serial_no+"&card_6th="+card_6th+"&open_id="+Q.QueryString.GetValue("openid"));t=e.lft_orderinfo_response.resp_msg}else void 0!=e.error_response?(n=e.error_response.resp_code,t=e.error_response.resp_msg?e.error_response.resp_msg:e.error_response.sub_msg):void 0!=e.user_acct_response?(n=e.user_acct_response.is_black,r=e.des_open_id):t="当前服务请求出错，请重新查询","WRONG0001"==n&&(t="短信验证码出错");if("B00002"==n){var a=i(),o=$.param(a);return void(window.location.href=BASE_URL+"FuLiBao/protocol_members.html?"+o+"&jm_openid="+q+"&openid="+r)}"init"!=t&&($("#msg_lable").text(t),$(".modal-content").show(),$(".modal-content2").hide(),B.showModals())}function i(){var e=$("#user-name").val(),t=$("#user-id").val().replace(/ /g,""),n=$("#creditCard").val().replace(/ /g,""),r=[{name:"open_id",value:Q.QueryString.GetValue("openid")},{name:"hp_no",value:$("#user-phone").val().replace(/ /g,"")},{name:"cust_name",value:e},{name:"id_no",value:t},{name:"lfq_cnt",value:Q.QueryString.GetValue("lfq_cnt")},{name:"lfq_amt",value:(parseFloat(Q.QueryString.GetValue("lfq_amt"))*(1+cardFeeRate/100)+1e-4).toFixed(2)},{name:"goods_amount",value:Q.QueryString.GetValue("lfq_amt")},{name:"creditCard",value:n},{name:"cvn2Num",value:$("#cvn2Num").val()},{name:"timeNum",value:$("#timeNum").val()},{name:"servlet_type",value:"create_order"},{name:"merId",value:Q.QueryString.GetValue("merId")},{name:"cardFeeRate",value:Q.QueryString.GetValue("cardFeeRate")},{name:"verify_code",value:$("#verify-code").val()},{name:"prdt_no",value:R}];return card_6th=n.substr(n.length-6),r}function s(){var e=P.isCnName($("#user-name").val()),t=P.isSFZNo($("#user-id").val().replace(/ /g,"")),n=!($("#cvn2Num").val().length<3),r=P.isTimeNum($("#timeNum").val()),a=11==$("#user-phone").val().replace(/ /g,"").length,o=P.isNum($("#verify-code").val(),4),u=$creditCard.val().replace(/ /g,""),l=P.isXYKNum(u);e&&t&&n&&r&&a&&o&&l?($("#submitA").removeClass("btn_disabled"),$("#submitA").addClass("btn_primary")):($("#submitA").removeClass("btn_primary"),$("#submitA").addClass("btn_disabled"))}function d(){$("#user-name").on("input",function(){s()}),$("#user-name").on("change  blur",c),$("#user-name").on("keyup",function(){E.getFocus("#user-id")})}function c(){$userName=$("#user-name");var e=$userName.parent().parent(),t=P.isCnName($userName.val());P.addOrRemoveErro(!0,"userName-erro","中文名字错误",e),(!t||$userName.val().length>8)&&($userName.val().length>8?P.addOrRemoveErro(!1,"userName-erro","中文名字长度必须小于8个字",e):P.addOrRemoveErro(t,"userName-erro","中文名字错误",e))}function v(){$("#user-id").on("change blur",p),$("#user-id").on("input",function(){$(this).val($(this).val().toUpperCase()),m($(this)[0]),3!=$("#cvn2Num").val().length&&E.getFocus("#cvn2Num"),s()}),$("#user-id").on("keyup",function(){E.deleteSpace(event.keyCode,"#user-id"),8!=event.keyCode&&37!=event.keyCode&&39!=event.keyCode&&E.spaceuserId(),E.getFocus("#creditCard")})}function m(e){var t=/[^\dX\*\s]/;(t.test(e.value)||""==e.value)&&(e.value=e.value.replace(/[^\dX\*\s]/g,"")),/[\*]/.test(e.value)&&(e.value=e.value.replace(/[\*]/g,"X"))}function p(){var e=$("#user-id").parent().parent(),t=P.isSFZNo($("#user-id").val().replace(/  /g,""));P.addOrRemoveErro(t,"sfz-erro","身份证号码格式错误",e)}function h(){$creditCard=$("#creditCard"),$creditCard.on("change blur",g),$creditCard.on("keyup",function(){E.deleteSpace(event.keyCode,"#creditCard"),8!=event.keyCode&&37!=event.keyCode&&39!=event.keyCode&&(E.deleteNoNumber(this),E.spaceCardNum()),E.getFocus("#cvn2Num")}),$creditCard.on("input",function(){s()})}function g(){$creditCard=$("#creditCard");var e=$creditCard.parent().parent(),t=$creditCard.val().replace(/ /g,""),n=P.isXYKNum(t);P.addOrRemoveErro(n,"isXYKNum-erro","信用卡格式错误",e)}function f(){$cvn2Num=$("#cvn2Num"),$cvn2Num.on("change blur",y),$cvn2Num.on("input",function(){this.value=this.value.replace(/[^\d]/g,"");var e=new String($cvn2Num.val());e.length>3&&$cvn2Num.val(e.substr(0,3)),s()}),$cvn2Num.on("keyup",function(){E.getFocus("#timeNum")})}function y(){var e=$("#cvn2Num").val(),t=!(e.length<3),n=$("#cvn2Num").parent().parent();P.addOrRemoveErro(t,"isCvn2Num-erro","CVN2格式错误",n)}function b(){$timeNum=$("#timeNum"),$timeNum.on("change blur",_),$timeNum.on("input",function(){E.deleteNoNumber(this);var e=new String($timeNum.val());e.length>4&&$timeNum.val(e.substr(0,4)),s()}),$timeNum.on("keyup",function(){E.getFocus("#user-phone")})}function _(){var e=$("#timeNum").val(),t=P.isTimeNum(e),n=$("#timeNum").parent().parent();P.addOrRemoveErro(t,"istimeNum-erro","有效时间格式错误",n)}function N(){$("#user-phone").on("change blur",C),$("#user-phone").on("keyup",function(){E.deleteSpace(event.keyCode,"#user-phone"),8!=event.keyCode&&37!=event.keyCode&&39!=event.keyCode&&(E.deleteNoNumber(this),E.spacePhoneNum()),60==T&&11==$("#user-phone").val().replace(/ /g,"").length&&$("#verifyBtn").removeClass("disabled"),13==event.keyCode&&$("input").blur(),s()})}function C(){var e=$("#user-phone").val().replace(/ /g,""),t=$("#user-phone").parent().parent(),n=!(e.length<11);P.addOrRemoveErro(n,"phoneNum-erro","手机号码错误",t)}function V(){if(!$verifyBtn.hasClass("disabled")){$verifyBtn.addClass("disabled"),$verifyBtn.text("重新获取("+T+"S)");var e=setInterval(function(){T--,$verifyBtn.text("重新获取("+T+"s)"),0==T&&($verifyBtn.text("重新获取"),clearInterval(e),$verifyBtn.removeClass("disabled"),T=60)},1e3);S()}}function S(){var e=LFQ_SMS_SEND_URL,t=$("#user-phone").val().replace(/ /g,""),n={hp_no:t,openid:q,prdt_no:R};Q.getAjax(e,n,function(e){console.log("验证码请求结果"),console.dir(e)})}function x(){var e=$("#verify-code");e.on("change blur",F),e.on("input",function(){E.deleteNoNumber(this),E.getFocus("#submitA"),s()})}function F(){var e=$("#verify-code"),t=e.parent().parent(),n=P.isNum(e.val(),4);P.addOrRemoveErro(n,"yzm-erro","验证码错误",t)}function w(){function e(e){$(".yanjing_icon").css("background",'url("../images/'+e+'")'),$(".yanjing_icon").css("background-repeat","no-repeat"),$(".yanjing_icon").css("background-position","5px 5px"),$(".yanjing_icon").css("background-size","23px 14px")}$(".yanjing_icon").on("touchstart",function(){e("yanjing2_icon.png"),$("#cvn2Num").attr("type","number")}),$(".yanjing_icon").on("touchend",function(){setTimeout(function(){e("yanjing_icon.png"),$("#cvn2Num").attr("type","password")},3e3)})}function k(){for(var e=["creditCard","hp_no","verify_code","id_no","cvn2Num","timeNum"],t=0,n=e.length;n>t;t++)Q.QueryString.GetValue(e[t])&&""!=Q.QueryString.GetValue(e[t])&&$("[name="+e[t]+"]").val(Q.QueryString.GetValue(e[t]));E.spaceCardNum(),E.spacePhoneNum(),E.spaceuserId(),Q.QueryString.GetValue("cust_name")&&""!=Q.QueryString.GetValue("cust_name")&&$("[name=cust_name]").val(decodeURI(Q.QueryString.GetValue("cust_name"))),Q.QueryString.GetValue("lfq_cnt")&&""!=Q.QueryString.GetValue("lfq_cnt")&&($("#stageNumberBox>span").removeClass("checked"),$("span[data-number='"+Q.QueryString.GetValue("lfq_cnt")+"']").addClass("checked"),stageNumber=parseInt(Q.QueryString.GetValue("lfq_cnt"))),Q.QueryString.GetValue("lfq_amt")&&""!=Q.QueryString.GetValue("lfq_amt")&&11==$("#user-phone").val().replace(/ /g,"").length&&$("#verifyBtn").removeClass("disabled"),s()}var Q=n(2);Q.QueryString.Initial();var I,G,R,B=n(1),P=n(5),E=n(8),j=n(3),T=60,q="";$verifyBtn=$("#verifyBtn"),$(function(){Q.checkBrowser(),d(),v(),h(),f(),b(),N(),x(),w(),r(),$("#submitA").on("touchstart",o),$("#submitApply").on("touchend",u),$("#submitCancel").on("touchstart",function(){$("#orderTiShi").hide()}),$("#orderTiShi .close_div").on("touchstart",function(){$("#orderTiShi").hide()}),$("#modalButton").parent().on("touchend",function(){B.hideModal(),event.preventDefault()}),$("#verifyBtn").on("touchstart",V),k(),$("#fanhui").on("touchstart",function(){location="./applyInstalment.html"+location.search}),a()})},function(e,t){function n(e){var t=e?e:"tishuModal",n=document.getElementById(t);n.style.display="none"}function r(e){var t=e?e:"tishuModal",n=document.getElementById(t);parseInt(document.documentElement.clientWidth),parseInt(document.documentElement.clientHeight);$(".modal>.back").css({top:"0px",left:"0px",position:"absolute",background:"#666",width:"100%",height:"100%",opacity:.4}),n.style.display="block"}function a(e,t){var n=t?t:"tishuModal";$("#"+n+" .modal-body").html(e)}function o(e,t){var n=t?t:"tishuModal";a(e),r(n)}!function(){$("#modalButton").parent().on("touchend",function(){n(),event.preventDefault()})}(),e.exports={setModalBody:a,hideModal:n,showModals:r,showBodalBody:o}},function(e,t){function n(){var e=navigator.userAgent.toLowerCase();-1==e.indexOf("mobile")&&-1==e.indexOf("iphone")&&(window.location.href="../error_browser.html")}function r(e,t,n){$.ajax({type:"post",dataType:"json",url:e,data:t,cache:!1,async:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(e){n(e)},error:function(e){n(e)}})}function a(e,t,n){$.ajax({type:"get",dataType:"json",url:e,data:t,cache:!1,async:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(e){n(e)},error:function(e){n(e)}})}var o={data:{},Initial:function(){var e,t,n=new String(window.location.search);n=n.substr(1,n.length),e=n.split("&");for(var r=0;r<e.length;r++)t=e[r].split("="),this.data[t[0]]=t[1]},GetValue:function(e){return this.data[e]}};e.exports={QueryString:o,checkBrowser:n,postAjax:r,getAjax:a}},function(e,t){function n(e){e.value=parseFloat(e.value.replace(/[^\d.]/g,"")),e.value=e.value.replace(/^\./g,""),e.value=e.value.replace(/\.{2,}/g,"."),e.value=e.value.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.value=e.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")}function r(e,t){inputValue=e.value,parseFloat(inputValue)>parseFloat(t)&&(e.value=t)}function a(e){-1!=e.value.search(/\.\d{3,}/)&&n(e)}function o(e){var t=/[^\d.]/;(t.test(e.value)||""==e.value)&&(e.value=e.value.replace(/[^\d.]/g,""))}function u(e){var t=String(e);return String(e).match(/[0-9,]{0,}\.\d\d/)?t=String(e).match(/[0-9,]{0,}\.\d\d/)[0]:String(e).match(/[0-9,]{0,}\.\d/)?t+="0":String(e).match(/[0-9,]{0,}\./)?t+="00":String(e).match(/[0-9,]{0,}/)&&(t+=".00"),t}e.exports={clearNoNum:n,monreMax:r,input2bit:a,deleteNoNumber:o,hold2bit:u}},,function(e,t){function n(e){var t=!0,n=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return n.test(e)===!1&&(t=!1),t}function r(e){if(e.length>=13&&e.length<=16){var t=e.match(/\d*/i)[0];return t==e}return!1}function a(e){var t=!0;return t=e.length<4||parseInt(e.substr(0,2))>12||parseInt(e.substr(0,2))<1?!1:l(e.substr(2,2),e.substr(0,2))}function o(e){var t="more",n=new Date;return e=e.toString(),4==e.length?n.getFullYear()>parseInt(e)?t="less":n.getFullYear()==parseInt(e):e.length>4||0==e.length?t="erro":(theYear2=n.getFullYear().toString().substr(2,4),parseInt(theYear2)>parseInt(e)?t="less":parseInt(theYear2)==parseInt(e)&&(t="same")),t}function u(e){var t=!0,n=new Date;return n.getMonth()>parseInt(e)-1&&(t=!1),t}function l(e,t){var n=o(e);return"more"==n?!0:"less"==n?!1:"same"!=n?!1:u(t)?!0:void 0}function i(e){var t=/\d{11}/;return!!t.test(e)}function s(e){var t=e.length,n=e.match(/[\u4e00-\u9fa5]/g)?e.match(/[\u4e00-\u9fa5]/g).length:0;return t==n&&0!=t&&9>n}function d(e,t){if(null!=e&&e.length==t){var n=e.match(/\d*/i)[0];return n==e}return!1}function c(e,t,n,r){var a=$("#"+t);e?a.length>0&&a.remove():0==a.length&&r.after('<div class="input-erro" id="'+t+'">'+n+"！</div>")}e.exports={isSFZNo:n,isXYKNum:r,isTimeNum:a,isPhoneNumber:i,isCnName:s,addOrRemoveErro:c,isNum:d}},,,function(e,t){function n(){var e=$("#user-id"),t=e.val(),n=e.val().replace(/ /g,"");n.length>6&&n.length<=14?t=n.substr(0,6)+"  "+n.substr(6):n.length>14&&(t=n.substr(0,6)+"  "+n.substr(6,8)+"  "+n.substr(14)),e.val(t)}function r(){$userPhone=$("#user-phone"),userPhoneVal=$userPhone.val(),needPhoneVal=$userPhone.val().replace(/ /g,""),needPhoneVal.length>3&&needPhoneVal.length<7?userPhoneVal=needPhoneVal.substr(0,3)+"  "+needPhoneVal.substr(3):needPhoneVal.length>7&&(userPhoneVal=needPhoneVal.substr(0,3)+"  "+needPhoneVal.substr(3,4)+"  "+needPhoneVal.substr(7)),$userPhone.val(userPhoneVal)}function a(){$creditCard=$("#creditCard"),creditCardVal=$creditCard.val(),needCardVal=$creditCard.val().replace(/ /g,""),needCardVal.length>4&&needCardVal.length<=8?creditCardVal=needCardVal.substr(0,4)+"  "+needCardVal.substr(4):needCardVal.length>8&&needCardVal.length<=12?creditCardVal=needCardVal.substr(0,4)+"  "+needCardVal.substr(4,4)+"  "+needCardVal.substr(8):needCardVal.length>12&&needCardVal.length<=16&&(creditCardVal=needCardVal.substr(0,4)+"  "+needCardVal.substr(4,4)+"  "+needCardVal.substr(8,4)+"  "+needCardVal.substr(12)),$creditCard.val(creditCardVal)}function o(e,t){if(8==e){for($selector=$(t),selectorValue=$selector.val();" "==selectorValue[selectorValue.length-1];)selectorValue=selectorValue.substr(0,selectorValue.length-1);$(t).val(selectorValue)}}function u(e){var t=/[^\d]/;$_this=$(e);var n=$_this.val(),r=n[n.length-1];t.test(r)&&$(e).val(n.replace(/[^\d]/g,""))}function l(e){13==event.keyCode&&$(e).focus()}function i(e){e.value=e.value.replace(/[^\d.]/g,""),e.value=e.value.replace(/^\./g,""),e.value=e.value.replace(/\.{2,}/g,"."),e.value=e.value.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.value=e.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")}e.exports={spaceuserId:n,spacePhoneNum:r,getFocus:l,spaceCardNum:a,clearNoNum:i,deleteSpace:o,deleteNoNumber:u}}]);